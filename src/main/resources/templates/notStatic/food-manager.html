<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Shop Manager</title>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/manager.css}">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link href="https://cdn.datatables.net/v/dt/dt-2.3.2/datatables.min.css" rel="stylesheet" integrity="sha384-d76uxpdVr9QyCSR9vVSYdOAZeRzNUN8A4JVqUHBVXyGxZ+oOfrZVHC/1Y58mhyNg" crossorigin="anonymous">

    <script src="https://cdn.datatables.net/v/dt/dt-2.3.2/datatables.min.js" integrity="sha384-JRUjeYWWUGO171YFugrU0ksSC6CaWnl4XzwP6mNjnnDh4hfFGRyYbEXwryGwLsEp" crossorigin="anonymous"></script>

    <style>
        body {
            background: linear-gradient(to bottom, #F2E6EE, #977DFF);
          }
        .upload-area {
            border: 2px dashed #d1d5db;
            transition: all 0.3s ease;
        }
        .upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        .upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }

        /* Back Navigation */
        .back-navigation {
          position: absolute;
          top: 20px;
          left: 20px;
          z-index: 10;
        }

        .back-btn {
          background: var(--surface);
          backdrop-filter: blur(10px);
          border: 1px solid var(--glass-border);
          border-radius: 25px;
          padding: 12px 20px;
          font-family: 'Inter', sans-serif;
          font-weight: 500;
          color: var(--text-primary);
          cursor: pointer;
          display: flex;
          align-items: center;
          gap: 8px;
          transition: var(--transition);
          box-shadow: var(--shadow-soft);
          text-decoration: none;
        }

        .back-btn:hover {
          background: rgba(255, 255, 255, 1);
          transform: translateY(-2px);
          box-shadow: var(--shadow-elevated);
        }
    </style>
</head>
<body>
<div class="container mx-auto px-4 py-8 max-w-4xl">
    <!-- Header -->
    <div class="text-center mb-8">
        <h1 class="text-4xl font-bold text-gray-800 mb-2">üçΩÔ∏è Food Shop Manager</h1>
        <p class="text-gray-600">Manage your food shop and menu items</p>
    </div>

    <div class="back-navigation">
        <button class="back-btn" onclick="window.location.href = '/protected/home';">
            <i class="fas fa-arrow-left"></i>
            <span>Back to Home</span>
        </button>
    </div>

    <!-- Shop Display Section -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-4">Your Shop</h2>
        <div class="flex flex-col md:flex-row items-center gap-6">
            <div id="shopImageDisplay" class="w-32 h-32 bg-gray-100 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300">
                <span class="text-gray-400 text-sm text-center">No Image<br>Uploaded</span>
            </div>
            <div class="flex-1">
                <h3 id="shopNameDisplay" class="text-xl font-semibold text-gray-800 mb-2">Shop Name Not Set</h3>
                <p id="shopDescDisplay" class="text-gray-600">Shop description not provided yet.</p>
            </div>
        </div>
    </div>

    <!-- Shop Setup Form -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">Shop Setup</h2>

        <!-- Shop Image Upload -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">Shop Image</label>
            <div class="upload-area rounded-lg p-6 text-center cursor-pointer" onclick="document.getElementById('shopImageInput').click()">
                <div class="text-gray-500">
                    <svg class="mx-auto h-12 w-12 mb-2" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <p class="text-sm">Click to upload shop image</p>
                    <p class="text-xs text-gray-400">PNG, JPG up to 10MB</p>
                </div>
            </div>
            <input type="file" id="shopImageInput" accept="image/*" class="hidden" onchange="handleShopImageUpload(this)">
            <div id="shopImagePreview" class="mt-4 hidden">
                <p class="text-sm text-gray-600 mb-2">Preview:</p>
                <img id="shopImagePreviewImg" class="w-24 h-24 object-cover rounded-lg border">
            </div>
        </div>

        <!-- Shop Details Form -->
        <div class="grid md:grid-cols-2 gap-6">
            <div>
                <label for="shopName" class="block text-sm font-medium text-gray-700 mb-2">Shop Name</label>
                <input type="text" id="shopName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter your shop name">
            </div>
            <div>
                <label for="shopDescription" class="block text-sm font-medium text-gray-700 mb-2">Shop Description</label>
                <textarea id="shopDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Describe your food shop"></textarea>
            </div>
        </div>

        <button onclick="updateShopInfo()" class="mt-4 bg-orange-500 hover:bg-orange-600 text-white px-6 py-2 rounded-lg font-medium transition-colors">
            Update Shop Info
        </button>
    </div>

    <!-- Add Food Item Form -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">Add Food Item</h2>

        <!-- Food Image Upload -->
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2">Food Image</label>
            <div class="upload-area rounded-lg p-6 text-center cursor-pointer" onclick="document.getElementById('foodImageInput').click()">
                <div class="text-gray-500">
                    <svg class="mx-auto h-12 w-12 mb-2" stroke="currentColor" fill="none" viewBox="0 0 48 48">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <p class="text-sm">Click to upload food image</p>
                    <p class="text-xs text-gray-400">PNG, JPG up to 10MB</p>
                </div>
            </div>
            <input type="file" id="foodImageInput" accept="image/*" class="hidden" onchange="handleFoodImageUpload(this)">
            <div id="foodImagePreview" class="mt-4 hidden">
                <img id="foodImagePreviewImg" class="w-24 h-24 object-cover rounded-lg border">
            </div>
        </div>

        <!-- Food Details Form -->
        <div class="grid md:grid-cols-2 gap-6">
            <div>
                <label for="foodName" class="block text-sm font-medium text-gray-700 mb-2">Food Name</label>
                <input type="text" id="foodName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter food name">
            </div>
            <div>
                <label for="foodPrice" class="block text-sm font-medium text-gray-700 mb-2">Food Price ($)</label>
                <input type="number" id="foodPrice" max="3500" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Enter price (max $3500)">
                <p class="text-xs text-gray-500 mt-1">Maximum price allowed: $3500</p>
            </div>
        </div>

        <!-- new: Food Description Field -->
        <div class="mt-6">
            <label for="foodDescription" class="block text-sm font-medium text-gray-700 mb-2">Food Description</label>
            <textarea id="foodDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent" placeholder="Describe this food item (ingredients, taste, etc.)"></textarea>
        </div>

        <button onclick="addFoodItem()" class="mt-6 bg-green-500 hover:bg-green-600 text-white px-6 py-2 rounded-lg font-medium transition-colors">
            Add Food Item
        </button>
    </div>

    <!-- Food Items Display -->
    <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-6">Menu Items</h2>
        <div id="foodItemsList" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div class="text-center text-gray-500 py-8 col-span-full">
                No food items added yet. Add your first item above!
            </div>
        </div>
    </div>

    <div id="OrderCard" class="bg-white rounded-xl shadow-lg p-6 OrderCard">
        <table id="OrderTable" class="OrderTable display">
            <thead class="table-header">
            <tr>
                <th>Order Id</th>
                <th>Customer</th>
                <th>Items</th>
                <th>Total</th>
                <th>Action</th>
            </tr>
            </thead>
        </table>
    </div>
</div>

<script th:src="@{/js/food-manager.js}"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'978eb4107246a035',t:'MTc1NjgzMzg5Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
